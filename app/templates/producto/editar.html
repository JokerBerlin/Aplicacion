

{% extends "base.html" %}

{% block imports %}
  <script type="text/javascript" src="/static/js/editarPresentacion.js"></script>
  <link href="/static/css/styleAutocomplete.css" rel="stylesheet">
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

{% endblock %}

{% block title %}
Editar Producto {{oProducto.nombre}}
{% endblock %}

{% block content %}

<!-- modal para agregar presentacion -->
<div class="modal fade" id="agrearPresentacion" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	Tabla de contenidos
			      <div class="modal-dialog">
			        <div class="modal-content">
			          <div class="modal-header">
			            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
			            <h4>Agregar Presentacion</h4>
			          </div>
			          <div class="modal-body">
                  <div class="col-xs-12 col-sm-12 col-md-12">
                  <label for="">Presentaciones:</label>
                    <select class="form-control" id="cmbPresentacion" required>
                      <!--<option value=""> </option>-->
                      {% for presentacion in presentaciones %}
                          <option value="{{presentacion.id}}">
                          {{presentacion.nombre}}
                          </option>
                      {% endfor %}
                      </select>

                  </div>
                  <div class="col-xs-12 col-sm-12 col-md-12">
                    <label for="">Cantidad de Presentación de unidad principal:</label>
                       <input type="number" name="cantPresentacion" id="cantPresentacion" required class="form-control">
                  </div>

                  {% for precio in precios%}
                  <div class="col-xs-12 col-sm-12 col-md-12">

                    <label for="">Precio - {{ precio.nombre }}: </label>
                  <input type="number" name="{{precio.id}}Precio" id="{{precio.id}}Precio" required class="form-control">
                  </div>
                  {% endfor %}
                  <input type="text" style="visibility:hidden;" name="" id="productoId" value="{{productoId}}">

                  <br>
                  <div class="col-xs-12 col-sm-12 col-md-12">
                    <br>
                    <!-- <button id="bt_add" class="btn btn-success">Agregar</button> -->

                  </div>

                </div>
                <div class="modal-footer">
                  <button id="bt_add" class="btn btn-success">Registrar presentacion</button>
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>                
                  <!-- <button type="button" class="btn btn-secondary" id="productoListar" data-dismiss="modal">Listar Productos</button> -->
                  <script type="text/javascript">
                    $(document).ready(function(){

                      //$('#productoListar').click(function(){
                      //  document.location.href='/Producto/listar/';
                      //});
                      //$('#listaProducto').click(function(){
                      //  document.location.href='/Producto/listar/';
                      //});
                    });
                  </script>
                </div>
			</div>
	    </div>
    </div>
<!-- fin de modal -->

<div id="myModal" class="modal fade"  tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLabel">Eliminar Presentación</h5>

				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>

			<div class="modal-body">



					<p>Estás a punto de eliminar la presentación <label id="nombrePresentacion"></label> </p>

			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
				<a id="eliminarPresentacionProd" type="button" class="btn btn-primary" href="">Eliminar</a>
			</div>
		</div>
	</div>
</div>

<div class="row">
      <div class="col-xs-12 col-sm-12">
          <div class="white-box">

            <div class="panel panel-info" style="border: 0.05px solid #ECECEC;">


  				<div class="panel-body">
	                <h3 class="box-title">Editar producto {{oProducto.nombre}}</h3>

					<form action="." method="post" enctype="multipart/form-data">
						{% csrf_token %}
						{% load widget_tweaks %}

	                 	{% for field in forms %}
							<div class="col-xs-4 col-sm-4 col-md-4">
								{{ field.errors }}
								{{ field.label_tag }}
								{{ field|add_class:"form-control"|attr:"disabled" }}

							</div>
						{% endfor %}
	                    <div class="col-xs-12 col-sm-12 col-md-12">
                          <br>
                          <!-- <button id="actualizarProducto" class="btn btn-success" onclick="EditarProducto();">Actualizar</button> -->
	    				            <!-- <a id="actualizarProducto" type="submit" role="button" class="btn btn-success" onclick="EditarProducto();">Actualizar</a> -->
                          <input id="actualizarProducto" class="btn btn-success" onclick="EditarProducto();" value="Actualizar">
            </form>
                  </div>
              </div>
          </div>

        <!-- principal -->
        <label ><center>Presentación principal de Productos</center></label>
        <table id="tabla" name="tablacontenido" class="table table-bordered">
        <thead>
            <tr>
                <td>Nº</td>
                <td>Presentación</td>
                <td>Cantidad pre. prin.</td>
                <td>Precio 1</td>
                <td>Precio 2</td>
                <td>Precio 3</td>
        </tr>
    </thead>
<tbody>
{% for producto in productos %}
  {% if producto.valor == 1 %}
    <tr>
      <td>Principal</td>
      <td>{{producto.presentacion}}</td>
      <td>{{producto.valor}}</td>
      <td>{{producto.precio1}}</td>
      <td>{{producto.precio2}}</td>
      <td>{{producto.precio3}}</td>
    </tr>
  {% endif %}
{% endfor %}


</tbody>

</table>
<br>
        <!---->

				<div class="col-lg-12" style="margin-top:2px;">
				    <div class="col-xs-12 col-sm-12 col-md-12">
				        <div class="row">
				            <div class="form-group">
		                        <label ><center>Presentación de Productos</center></label>
		                        <table id="tabla" name="tablacontenido" class="table table-bordered">
		                        <thead>
		                            <tr>
		                                <td>Nº</td>
		                                <td>Presentación</td>
		                                <td>Cantidad pre. prin.</td>
		                                <td>Precio 1</td>
		                                <td>Precio 2</td>
		                                <td>Precio 3</td>
                                        <td>Opciones</td>
				                    </tr>
				                </thead>
								<tbody>
										{% for producto in productos %}
											{% if producto.valor == 1 %}
											{% else %}
												<tr>
													<td>{{forloop.counter0}}</td>
													<td>{{producto.presentacion}}</td>
													<td><input class="form-control" id="valorPrecio{{forloop.counter0}}" type="number" name="" value="{{producto.valor}}" disabled ></td>
													<td><input class="form-control" id="Precio1{{forloop.counter0}}" type="number" name="" value="{{producto.precio1}}" disabled ></td>
													<td><input class="form-control" id="Precio2{{forloop.counter0}}" type="number" name="" value="{{producto.precio2}}" disabled ></td>
													<td><input class="form-control" id="Precio3{{forloop.counter0}}" type="number" name="" value="{{producto.precio3}}" disabled ></td>
                                					<td><a role="button" class="btn btn-primary" id="editar{{forloop.counter0}}" onclick="EditarPresentacionProducto('{{ producto.precio1Id }}','{{ producto.precio2Id }}','{{ producto.precio3Id }}','{{ producto.presentacionId }}','{{ forloop.counter0}}');" >Editar</a>
                                    				<a data-target="#myModal" role="button" class="btn btn-danger" data-toggle="modal" id="" onclick="EliminarPresentacionProducto('{{ producto.presentacion }}','{{ producto.productoId }}','{{ producto.presentacionId }}');">Eliminar</a></td>

                            					</tr>
											{% endif %}
										{% endfor %}


								</tbody>

				            </table>
                                  <button class="btn btn-success" data-toggle="modal" data-target="#agrearPresentacion">Agregar Presentacion</button>

				                          <br>
				                      </div>
				                          <br>

				                      <a href="/Producto/listar/" id="btnListar" type="button" class="btn btn-success">Listar Producto</a>
				                    <!--</form>-->
				                  </div>
				                </div>
				              </div>

				                  <div class="row">
				                      <div class="form-group">
				                          <div class="col-sm-8 col-md-8 col-lg-6">
				                              <div id="tabs" style="display:none;">
				                                  <table id="listaProducto"></table>
				                                  <div id="pagerlistaProducto"  style="text-align: center;"></div>
				                              </div>
				                          </div>

				                          <div class="col-sm-2 col-md-2 col-lg-4">

				                          </div>
				                      </div>
				                  </div>






	    		</div>

    </div>

</div>
{% endblock %}
